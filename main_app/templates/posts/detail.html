{% extends 'base.html' %}
{% load static %}
{% block content %}
<img src= "{{ post.profile.picture.url}}" alt="picture" width="200px"  >
<br>

<h1> {{post.title}} </h1>

<br>
{{post.date}} PST
<br>
Written by {{post.profile.firstname}} {{post.profile.lastname}}
<br>
{{post.content}}
{% if request.user.profile == post.profile%}
<!-- DELETE POP UP WINDOW-->
{% comment %} <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a> {% endcomment %}

<div id = "deletediv" class="modal">
 <div class="modal-content">
    <h1> Are you sure you want to delete {{post.title}}? </h1>
    <a href = "{% url 'deletepost' post.id %}" class = ' waves-effect waves-light btn modal-trigger btn-small red'> Yes </a>
    <a id = "no" class = 'btn-small'> No </a>
 </div>
 <div class="modal-footer">
    <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
 </div>
</div>

<!-- END OF DELETE POP UP WINDOW-->

<br>
<a class = "btn-small"href="{% url 'postedit' post.id%} "> Edit </a> <br>
<a id = "firstdelete" class = "btn-small red"> Delete </a>
{% endif %}

<br>
{% if post.picture %}
 POST PICTURE : <img src="{{post.picture.url}}" width="200px" alt="picture"> 
{% endif %}
<!-- Comment section--> 
Number of comments: {{post.comment_set.count}}

{% if request.user.profile %}
 <form action = "{% url 'add_comment' post.id %}" method = "POST">
{% csrf_token %} 
 {{comment_form.as_p}}
 <!---->
<input class = 'btn' type ="submit">
</form> 
{% endif %}
 {% for comment in post.comment_set.all%}
 User who made comment: {{comment.profile}}
 
 <br>
 
  <img src="{{comment.profile.picture.url}}" width ="75px">
Comment: {{comment.content}} 
{% if comment.profile == request.user.profile %}
<a class = "btn" href="{% url 'delete_comment' comment.id %}"> Delete </a>
{% endif %}
{% endfor %} 

<!-- Modal Trigger -->




<script>
$(document).ready(function(){
    $('.modal1').modal();
});

$('#deletediv').hide()

$('#firstdelete').click(function(){
    $('#deletediv').show()
})

$('#no').click(function(){
    $('#deletediv').hide()
})
</script>
{% endblock content %}

